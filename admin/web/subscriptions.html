<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription Management | HRMS Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;700&display=swap');

        :root {
            --red: #FF0000;
            --black: #0A0A0A;
            --gray: #1F1F1F;
        }

        body {
            background-color: var(--black);
            font-family: 'Inter', sans-serif;
            color: white;
            margin: 0;
            overflow-x: hidden;
        }

        .glitch {
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
        }

        /* Sidebar Structure */
        .command-bar {
            width: 80px;
            background: var(--gray);
            border-right: 2px solid var(--red);
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s;
            z-index: 110;
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
        }

        @media (max-width: 768px) {
            .command-bar {
                transform: translateX(-100%);
                width: 280px;
                box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5);
            }

            .command-bar.open {
                transform: translateX(0);
            }

            .sidebar-backdrop {
                display: none;
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(5px);
                z-index: 105;
            }

            .sidebar-backdrop.open {
                display: block;
            }

            main {
                margin-left: 0 !important;
                padding: 15px !important;
                overflow-x: hidden;
            }

            .mobile-header {
                display: flex !important;
                background: rgba(31, 31, 31, 0.8) !important;
                backdrop-filter: blur(12px);
                -webkit-backdrop-filter: blur(12px);
            }

            .nav-text {
                opacity: 1 !important;
                display: inline-block !important;
            }

            h1.glitch {
                font-size: 20px !important;
                letter-spacing: 1px !important;
            }

            p.text-gray-600 {
                letter-spacing: 2px !important;
                font-size: 8px !important;
            }

            /* Premium Card-based Industrial Table on Mobile */
            .industrial-table {
                display: block;
                background: transparent;
            }

            .industrial-table thead {
                display: none;
            }

            .industrial-table tbody {
                display: block;
                width: 100%;
            }

            .industrial-table tr {
                display: block;
                background: linear-gradient(145deg, #111, #0a0a0a);
                margin-bottom: 25px;
                padding: 20px;
                border: 1px solid #222;
                border-left: 3px solid var(--red);
                border-radius: 4px;
                box-shadow: inset 0 0 15px rgba(255, 0, 0, 0.05);
                position: relative;
                overflow: hidden;
            }

            .industrial-table tr::after {
                content: "";
                position: absolute;
                top: 0;
                right: 0;
                width: 40px;
                height: 40px;
                background: linear-gradient(45deg, transparent 50%, rgba(255, 0, 0, 0.1) 50%);
            }

            .industrial-table td {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                padding: 12px 0;
                border: none !important;
                width: 100%;
                text-align: left;
                border-bottom: 1px solid rgba(255, 255, 255, 0.03) !important;
            }

            .industrial-table td>div,
            .industrial-table td>span {
                max-width: 100%;
                word-wrap: break-word;
                margin-top: 4px;
            }

            .industrial-table td:last-child {
                border-bottom: none !important;
                margin-top: 10px;
                padding-top: 20px;
                flex-direction: row;
                justify-content: center;
                gap: 20px;
            }

            .industrial-table td::before {
                content: attr(data-label);
                flex-shrink: 0;
                font-family: 'Orbitron', sans-serif;
                font-size: 8px;
                color: var(--red);
                font-weight: 900;
                text-transform: uppercase;
                letter-spacing: 2px;
                margin-bottom: 2px;
            }
        }

        @media (min-width: 769px) {
            .command-bar:hover {
                width: 240px;
            }

            .command-bar:hover .nav-text {
                opacity: 1;
                display: inline-block;
            }

            main {
                margin-left: 80px;
                transition: margin-left 0.4s;
            }

            .command-bar:hover~main {
                margin-left: 240px;
            }

            .mobile-header {
                display: none;
            }
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 20px;
            color: #666;
            text-decoration: none;
            border-left: 4px solid transparent;
            white-space: nowrap;
            transition: 0.3s;
        }

        .nav-item.active,
        .nav-item:hover {
            color: white;
            background: rgba(255, 0, 0, 0.1);
            border-left: 4px solid var(--red);
        }

        .nav-text {
            opacity: 0;
            display: none;
            margin-left: 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
        }

        .mobile-header {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(31, 31, 31, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 2px solid var(--red);
            padding: 15px 20px;
            z-index: 100;
            align-items: center;
            justify-content: space-between;
            display: none;
        }

        /* Table Design */
        .industrial-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
        }

        .industrial-table thead tr {
            color: var(--red);
            font-family: 'Orbitron', sans-serif;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .industrial-table tr {
            background: #111;
            transition: 0.3s;
        }

        .industrial-table td,
        .industrial-table th {
            padding: 20px;
            text-align: left;
        }

        .industrial-table td {
            border-top: 1px solid #222;
            border-bottom: 1px solid #222;
        }

        .industrial-table tr:hover {
            background: #161616;
            border-left: 4px solid var(--red);
        }

        /* Status Pills */
        .status-pill {
            padding: 4px 10px;
            font-size: 9px;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            font-weight: 900;
            border-radius: 2px;
            letter-spacing: 1px;
        }

        .status-active {
            background: rgba(0, 255, 0, 0.1);
            color: #00FF00;
            border: 1px solid #00FF00;
        }

        .status-overdue {
            background: rgba(255, 0, 0, 0.1);
            color: #FF0000;
            border: 1px solid #FF0000;
        }

        .status-expiring {
            background: rgba(255, 255, 0, 0.1);
            color: #FFFF00;
            border: 1px solid #FFFF00;
        }

        .btn-action {
            background: var(--red);
            color: white;
            font-family: 'Orbitron', sans-serif;
            padding: 12px 25px;
            font-size: 11px;
            font-weight: bold;
            transition: 0.3s;
            letter-spacing: 1px;
        }

        .btn-action:hover {
            background: #cc0000;
            box-shadow: 0 0 15px var(--red);
        }
    </style>
</head>

<body class="flex flex-col md:flex-row">

    <div id="backdrop" class="sidebar-backdrop" onclick="toggleSidebar()"></div>

    <header class="mobile-header">
        <div class="glitch text-lg font-black uppercase tracking-tighter">MV_<span class="text-red-600">PRO</span></div>
        <button onclick="toggleSidebar()" class="text-white text-xl p-2"><i class="fas fa-bars"></i></button>
    </header>

    <aside id="sidebar" class="command-bar flex flex-col">
        <div class="h-20 flex items-center justify-center border-b border-gray-800">
            <div class="w-10 h-10 bg-red-600 flex items-center justify-center font-black">MV</div>
        </div>
        <nav class="mt-4 flex-1">
            <a href="dashboard.html" class="nav-item"><i class="fas fa-th-large"></i><span
                    class="nav-text">DASHBOARD</span></a>
            <a href="companies.html" class="nav-item"><i class="fas fa-industry"></i><span
                    class="nav-text">COMPANIES</span></a>
            <a href="subscriptions.html" class="nav-item active"><i class="fas fa-bolt"></i><span
                    class="nav-text">SUBSCRIPTION</span></a>
            <a href="history.html" class="nav-item"><i class="fas fa-history"></i><span class="nav-text">TRANS.
                    HISTORY</span></a>
            <a href="invoices.html" class="nav-item"><i class="fas fa-file-invoice-dollar"></i><span
                    class="nav-text">INVOICE</span></a>
        </nav>
        <div class="p-6 border-t border-gray-800 text-center">
            <a href="login.html" class="nav-item"><i class="fas fa-power-off"></i><span
                    class="nav-text">LOGOUT</span></a>
        </div>
    </aside>

    <main class="flex-1 p-6 md:p-12">
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-12">
            <div>
                <h1 class="glitch text-3xl font-black italic uppercase">Subscription_Hub</h1>
                <p class="text-gray-600 text-[10px] tracking-[4px] mt-1">PLAN_MANAGEMENT // ACCESS_MV</p>
            </div>
            <button onclick="renewSubscription()" class="btn-action mt-6 md:mt-0 w-full md:w-auto">
                <i class="fas fa-plus mr-2"></i> RENEW SUBSCRIPTION
            </button>
        </header>

        <div class="overflow-x-auto">
            <table class="industrial-table">
                <thead>
                    <tr>
                        <th>Company Name</th>
                        <th>Last Payment</th>
                        <th>Next Payment</th>
                        <th>Users</th>
                        <th>Plan Type</th>
                        <th>Sub. Amount</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="subscriptionTableBody">
                    <tr>
                        <td data-label="Company Name">
                            <div class="font-bold text-white">MemoPets Store</div>
                            <div class="text-[9px] text-gray-500 uppercase mt-1">ID: COMP_001</div>
                        </td>
                        <td data-label="Last Payment">
                            <div class="text-xs">2026-01-10</div>
                            <div class="text-[9px] text-gray-600">TXN_99210</div>
                        </td>
                        <td data-label="Next Payment">
                            <div class="text-xs text-red-600 font-bold">2026-02-10</div>
                            <div class="text-[9px] text-gray-600 italic">Expected</div>
                        </td>
                        <td data-label="Users" class="font-mono text-sm">42</td>
                        <td data-label="Plan Type">
                            <div
                                class="status-pill inline-block bg-gray-800 text-white border border-gray-600 px-2 py-1">
                                ENTERPRISE_XL</div>
                        </td>
                        <td data-label="Sub. Amount">
                            <div class="text-sm font-black">$1,250.00</div>
                            <div class="text-[9px] text-gray-600">Monthly</div>
                        </td>
                        <td data-label="Status">
                            <span class="status-pill status-active">ACTIVE</span>
                        </td>
                        <td data-label="Actions">
                            <button onclick="downloadInvoice('INV-SUB-001')"
                                class="text-gray-600 hover:text-white transition mr-4" title="Download Invoice"><i
                                    class="fas fa-download"></i></button>
                            <button onclick="openSubscriptionActions('COMP_001')"
                                class="text-gray-600 hover:text-white transition mr-4"><i
                                    class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr>
                        <td data-label="Company Name">
                            <div class="font-bold text-white">Apex Dynamics</div>
                            <div class="text-[9px] text-gray-500 uppercase mt-1">ID: COMP_002</div>
                        </td>
                        <td data-label="Last Payment">
                            <div class="text-xs">2025-12-15</div>
                            <div class="text-[9px] text-gray-600">TXN_88122</div>
                        </td>
                        <td data-label="Next Payment">
                            <div class="text-xs text-gray-400">2026-01-15</div>
                        </td>
                        <td data-label="Users" class="font-mono text-sm">12</td>
                        <td data-label="Plan Type">
                            <div
                                class="status-pill inline-block bg-gray-800 text-white border border-gray-600 px-2 py-1">
                                STARTUP_LITE</div>
                        </td>
                        <td data-label="Sub. Amount">
                            <div class="text-sm font-black">$450.00</div>
                            <div class="text-[9px] text-gray-600">Monthly</div>
                        </td>
                        <td data-label="Status">
                            <span class="status-pill status-overdue">OVERDUE</span>
                        </td>
                        <td data-label="Actions">
                            <button onclick="downloadInvoice('INV-SUB-002')"
                                class="text-gray-600 hover:text-white transition mr-4" title="Download Invoice"><i
                                    class="fas fa-download"></i></button>
                            <button onclick="openSubscriptionActions('COMP_002')"
                                class="text-gray-600 hover:text-white transition mr-4"><i
                                    class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr>
                        <td data-label="Company Name">
                            <div class="font-bold text-white">Quantum Systems</div>
                            <div class="text-[9px] text-gray-500 uppercase mt-1">ID: COMP_003</div>
                        </td>
                        <td data-label="Last Payment">
                            <div class="text-xs">2026-01-05</div>
                            <div class="text-[9px] text-gray-600">TXN_99003</div>
                        </td>
                        <td data-label="Next Payment">
                            <div class="text-xs text-yellow-500">2026-02-05</div>
                        </td>
                        <td data-label="Users" class="font-mono text-sm">85</td>
                        <td data-label="Plan Type">
                            <div
                                class="status-pill inline-block bg-gray-800 text-white border border-gray-600 px-2 py-1">
                                NEXUS_ULTRA</div>
                        </td>
                        <td data-label="Sub. Amount">
                            <div class="text-sm font-black">$3,800.00</div>
                            <div class="text-[9px] text-gray-600">Quarterly</div>
                        </td>
                        <td data-label="Status">
                            <span class="status-pill status-expiring">EXPIRING</span>
                        </td>
                        <td data-label="Actions">
                            <button onclick="downloadInvoice('INV-SUB-003')"
                                class="text-gray-600 hover:text-white transition mr-4" title="Download Invoice"><i
                                    class="fas fa-download"></i></button>
                            <button onclick="openSubscriptionActions('COMP_003')"
                                class="text-gray-600 hover:text-white transition mr-4"><i
                                    class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('backdrop').classList.toggle('open');
        }

        function renewSubscription() {
            alert("INITIATING_RENEWAL_PROTOCOL...\n\nConnecting to payment gateway for authorization.");
        }

        function openSubscriptionActions(companyId) {
            alert("ACCESSING_HUB_ACTIONS // COMPANY_ID: " + companyId + "\n\n1. Modify Plan\n2. Cancel Auto-renew\n3. View Billing history");
        }

        async function downloadPDF(invoiceId) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Industrial/Premium Font Config (Standard Fonts)
            doc.setFont("helvetica", "bold");

            // Header - Logo Area
            doc.setFillColor(20, 20, 20); // Dark Background
            doc.rect(0, 0, 210, 40, "F");

            doc.setTextColor(255, 0, 0); // Red Accent
            doc.setFontSize(22);
            doc.text("7 DREAM", 20, 25);

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.text("SUBSCRIPTION_MODULE // SYSTEM", 20, 32);

            // Invoice Title
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(18);
            doc.text("SUBSCRIPTION INVOICE", 20, 60);

            doc.setDrawColor(255, 0, 0);
            doc.setLineWidth(1);
            doc.line(20, 65, 190, 65);

            // Invoice Details
            doc.setFontSize(12);
            doc.setFont("helvetica", "normal");

            let y = 80;
            const details = [
                { label: "SUBSCRIPTION REF", value: invoiceId },
                { label: "DATE ISSUED", value: new Date().toLocaleDateString() },
                { label: "CYCLE", value: "MONTHLY RECURRING" },
                { label: "CLIENT", value: "Registered Partner" }
            ];

            details.forEach(detail => {
                doc.setFont("helvetica", "bold");
                doc.text(`${detail.label}:`, 20, y);
                doc.setFont("helvetica", "normal");
                doc.text(detail.value, 70, y);
                y += 10;
            });

            // Amount Section
            y += 10;
            doc.setFillColor(240, 240, 240);
            doc.rect(20, y, 170, 30, "F");

            doc.setFont("helvetica", "bold");
            doc.setFontSize(14);
            doc.text("AMOUNT DUE", 30, y + 20);

            doc.setTextColor(255, 0, 0);
            doc.setFontSize(16);
            doc.text("$1,250.00", 140, y + 20);

            // Footer
            doc.setTextColor(150, 150, 150);
            doc.setFontSize(8);
            doc.text("CONFIDENTIAL FINANCIAL RECORD // GENERATED BY HRMS PRO", 20, 280);

            doc.save(`${invoiceId}_Sub.pdf`);
        }

        function downloadInvoice(id) {
            downloadPDF(id);
        }
    </script>
</body>

</html>